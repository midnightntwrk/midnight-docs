---
title: Deploy Hello World Contract
description: Deploy your compiled Hello World smart contract to Midnight Testnet.
sidebar_position: 2
sidebar_label: Deploy an MN App
tags: [deployment, testnet, smart-contract, tutorial]
slug: /getting-started/deploy-hello-world
toc_max_heading_level: 2
---

# Deploying Your Hello World Contract

This guide continues from where the Hello World tutorial left off, showing how to deploy your compiled contract to Midnight Testnet.

## Prerequisites

You should already have the following from the Hello World tutorial:

  * A `contracts/hello-world.compact` file.
  * Compiled contract artifacts in the `contracts/managed/hello-world/` folder.
  * A basic `package.json` and project structure.

## Update Your Project for Deployment

Replace your existing `package.json` with this complete version to include all necessary deployment dependencies and scripts.

```json
{
  "name": "my-mn-app",
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "compile": "compact compile contracts/hello-world.compact contracts/managed/hello-world",
    "build": "tsc",
    "deploy": "node dist/deploy.js"
  },
  "dependencies": {
    "@midnight-ntwrk/compact-runtime": "^0.8.1",
    "@midnight-ntwrk/ledger": "^4.0.0",
    "@midnight-ntwrk/midnight-js-contracts": "2.0.2",
    "@midnight-ntwrk/midnight-js-http-client-proof-provider": "2.0.2",
    "@midnight-ntwrk/midnight-js-indexer-public-data-provider": "2.0.2",
    "@midnight-ntwrk/midnight-js-level-private-state-provider": "2.0.2",
    "@midnight-ntwrk/midnight-js-node-zk-config-provider": "2.0.2",
    "@midnight-ntwrk/midnight-js-network-id": "2.0.2",
    "@midnight-ntwrk/midnight-js-types": "2.0.2",
    "@midnight-ntwrk/wallet": "5.0.0",
    "@midnight-ntwrk/wallet-api": "5.0.0",
    "@midnight-ntwrk/zswap": "^4.0.0",
    "ws": "^8.18.3"
  },
  "devDependencies": {
    "@types/node": "^24.4.0",
    "@types/ws": "^8.5.10",
    "typescript": "^5.9.2"
  }
}
```

After updating the file, install the new dependencies.

```bash
npm install
```

### Create TypeScript configuration

Create a `tsconfig.json` file to configure the TypeScript compiler.

```bash
touch tsconfig.json
```

Add the following configuration to `tsconfig.json`. This tells TypeScript how to compile your project into modern, compatible JavaScript.

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ESNext",
    "moduleResolution": "node",
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "resolveJsonModule": true
  },
  "include": ["src/**/*"]
}
```

### Create the deployment script

Next, create the directory and file for your deployment script.

```bash
mkdir src
touch src/deploy.ts
```

Now, let's build the `src/deploy.ts` script piece by piece.

1.  **Add all necessary imports.** These modules provide the tools to generate wallets, connect to the network, and manage transactions.

    ```typescript
    import { WalletBuilder } from "@midnight-ntwrk/wallet";
    import { deployContract } from "@midnight-ntwrk/midnight-js-contracts";
    import { httpClientProofProvider } from "@midnight-ntwrk/midnight-js-http-client-proof-provider";
    import { indexerPublicDataProvider } from "@midnight-ntwrk/midnight-js-indexer-public-data-provider";
    import { NodeZkConfigProvider } from "@midnight-ntwrk/midnight-js-node-zk-config-provider";
    import { levelPrivateStateProvider } from "@midnight-ntwrk/midnight-js-level-private-state-provider";
    import {
      NetworkId,
      setNetworkId,
      getZswapNetworkId,
      getLedgerNetworkId,
    } from "@midnight-ntwrk/midnight-js-network-id";
    import { createBalancedTx } from "@midnight-ntwrk/midnight-js-types";
    import { nativeToken, Transaction } from "@midnight-ntwrk/ledger";
    import { Transaction as ZswapTransaction } from "@midnight-ntwrk/zswap";
    import { WebSocket } from "ws";
    import * as fs from "fs";
    import * as path from "path";
    import * as readline from "readline/promises";
    import * as Rx from "rxjs";
    import { type Wallet } from '@midnight-ntwrk/wallet-api';
    ```

2.  **Add network configuration and a helper function.** This section sets the network to Testnet, defines the connection endpoints, and includes a `waitForFunds` function that monitors the wallet until it receives tokens from the faucet.

    ```typescript
    // Fix WebSocket for Node.js environment
    // @ts-ignore
    globalThis.WebSocket = WebSocket;

    // Configure for Midnight Testnet
    setNetworkId(NetworkId.TestNet);

    // Testnet connection endpoints
    const TESTNET_CONFIG = {
      indexer: "https://indexer.testnet-02.midnight.network/api/v1/graphql",
      indexerWS: "wss://indexer.testnet-02.midnight.network/api/v1/graphql/ws",
      node: "https://rpc.testnet-02.midnight.network",
      proofServer: "http://127.0.0.1:6300",
    };

    const waitForFunds = (wallet: Wallet) =>
      Rx.firstValueFrom(
        wallet.state().pipe(
          Rx.tap((state) => {
            if (state.syncProgress) {
              console.log(
                `Sync progress: synced=${state.syncProgress.synced}, percentage=${state.syncProgress.percentage}`
              );
            }
          }),
          Rx.filter((state) => state.syncProgress?.synced === true),
          Rx.map((s) => s.balances[nativeToken()] ?? 0n),
          Rx.filter((balance) => balance > 0n),
          Rx.tap((balance) => console.log(`Wallet funded with balance: ${balance}`))
        )
      );
    ```

3.  **Create the `main` function.** This function will orchestrate the entire deployment process. It prompts the user for a wallet seed (or generates a new one) and includes error handling.

    ```typescript
    async function main() {
      console.log("🌙 Midnight Hello World Deployment\n");

      const rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout,
      });

      try {
        // Ask user if they have an existing wallet seed
        const choice = await rl.question("Do you have a wallet seed? (y/n): ");

        let walletSeed: string;
        if (choice.toLowerCase() === "y" || choice.toLowerCase() === "yes") {
          // Use existing seed
          walletSeed = await rl.question("Enter your 64-character seed: ");
        } else {
          // Generate new wallet seed
          const bytes = new Uint8Array(32);
          // @ts-ignore
          crypto.getRandomValues(bytes);
          walletSeed = Array.from(bytes, (b) =>
            b.toString(16).padStart(2, "0")
          ).join("");
          console.log(`\n📝 SAVE THIS SEED: ${walletSeed}\n`);
        }

        // We'll add the rest of the deployment logic here...

      } catch (error) {
        console.error("Failed:", error);
      } finally {
        rl.close();
      }
    }
    ```

4.  **Add wallet building and funding logic.** Inside the `try` block, add the code to build the wallet from the seed. The script will now print your wallet address and, if your balance is zero, it will automatically wait for you to get funds from the faucet before continuing.

    ```typescript
    // Build wallet from seed
    console.log("Building wallet...");
    const wallet = await WalletBuilder.buildFromSeed(
      TESTNET_CONFIG.indexer,
      TESTNET_CONFIG.indexerWS,
      TESTNET_CONFIG.proofServer,
      TESTNET_CONFIG.node,
      walletSeed,
      getZswapNetworkId(),
      "info"
    );

    wallet.start();
    const state = await Rx.firstValueFrom(wallet.state());

    console.log(`Your wallet address is: ${state.address}`);

    let balance = state.balances[nativeToken()] || 0n;

    if (balance === 0n) {
      console.log(`Your wallet balance is: 0`);
      console.log("Visit: https://midnight.network/test-faucet to get some funds.");
      console.log(`Waiting to receive tokens...`);
      balance = await waitForFunds(wallet);
    }

    console.log(`Balance: ${balance}`);
    ```

5.  **Load the compiled contract.** This snippet loads the compiled contract code (`index.cjs`) so it can be deployed.

    ```typescript
    // Load the compiled contract files
    console.log("Loading contract...");
    const contractPath = path.join(process.cwd(), "contracts");
    const contractModulePath = path.join(
      contractPath,
      "managed",
      "hello-world",
      "contract",
      "index.cjs"
    );

    if (!fs.existsSync(contractModulePath)) {
      console.error("Contract not found! Run: npm run compile");
      process.exit(1);
    }

    const HelloWorldModule = await import(contractModulePath);
    const contractInstance = new HelloWorldModule.Contract({});

    // Create wallet provider for transactions
    const walletState = await Rx.firstValueFrom(wallet.state());

    const walletProvider = {
      coinPublicKey: walletState.coinPublicKey,
      encryptionPublicKey: walletState.encryptionPublicKey,
      balanceTx(tx: any, newCoins: any) {
        return wallet
          .balanceTransaction(
            ZswapTransaction.deserialize(
              tx.serialize(getLedgerNetworkId()),
              getZswapNetworkId()
            ),
            newCoins
          )
          .then((tx) => wallet.proveTransaction(tx))
          .then((zswapTx) =>
            Transaction.deserialize(
              zswapTx.serialize(getZswapNetworkId()),
              getLedgerNetworkId()
            )
          )
          .then(createBalancedTx);
      },
      submitTx(tx: any) {
        return wallet.submitTransaction(tx);
      },
    };
    ```

6.  **Configure the required providers.** These providers are essential modules that handle different aspects of the deployment, such as managing private state, fetching public data, generating proofs, and interacting with your wallet.

    ```typescript
    // Configure all required providers
    console.log("Setting up providers...");
    const providers = {
      privateStateProvider: levelPrivateStateProvider({
        privateStateStoreName: "hello-world-state",
      }),
      publicDataProvider: indexerPublicDataProvider(
        TESTNET_CONFIG.indexer,
        TESTNET_CONFIG.indexerWS
      ),
      zkConfigProvider: new NodeZkConfigProvider(contractPath),
      proofProvider: httpClientProofProvider(TESTNET_CONFIG.proofServer),
      walletProvider: walletProvider,
      midnightProvider: walletProvider,
    };
    ```

7.  **Add the final deployment logic.** This code calls `deployContract` to send your contract to the blockchain. Upon success, it saves the new contract address to a `deployment.json` file.

    ```typescript
    // Deploy the contract to blockchain
    console.log("Deploying contract (30-60 seconds)...");

    const deployed = await deployContract(providers, {
      contract: contractInstance,
      privateStateId: "helloWorldState",
      initialPrivateState: {},
    });

    const contractAddress = deployed.deployTxData.public.contractAddress;

    // Save deployment information
    console.log("\n✅ DEPLOYED!");
    console.log(`Contract: ${contractAddress}\n`);

    const info = {
      contractAddress,
      deployedAt: new Date().toISOString(),
    };

    fs.writeFileSync("deployment.json", JSON.stringify(info, null, 2));
    console.log("Saved to deployment.json");

    // Close the wallet connection
    await wallet.close();
    ```

8.  **Initialize the main function.** Add this final line to the end of `src/deploy.ts` to execute the script.

    ```typescript
    main().catch(console.error);
    ```

<details>
<summary>See complete `deploy.ts` file</summary>
```typescript
import { WalletBuilder } from "@midnight-ntwrk/wallet";
import { deployContract } from "@midnight-ntwrk/midnight-js-contracts";
import { httpClientProofProvider } from "@midnight-ntwrk/midnight-js-http-client-proof-provider";
import { indexerPublicDataProvider } from "@midnight-ntwrk/midnight-js-indexer-public-data-provider";
import { NodeZkConfigProvider } from "@midnight-ntwrk/midnight-js-node-zk-config-provider";
import { levelPrivateStateProvider } from "@midnight-ntwrk/midnight-js-level-private-state-provider";
import {
  NetworkId,
  setNetworkId,
  getZswapNetworkId,
  getLedgerNetworkId,
} from "@midnight-ntwrk/midnight-js-network-id";
import { createBalancedTx } from "@midnight-ntwrk/midnight-js-types";
import { nativeToken, Transaction } from "@midnight-ntwrk/ledger";
import { Transaction as ZswapTransaction } from "@midnight-ntwrk/zswap";
import { WebSocket } from "ws";
import * as fs from "fs";
import * as path from "path";
import * as readline from "readline/promises";
import * as Rx from "rxjs";
import { type Wallet } from '@midnight-ntwrk/wallet-api';


// Fix WebSocket for Node.js environment
// @ts-ignore
globalThis.WebSocket = WebSocket;

// Configure for Midnight Testnet
setNetworkId(NetworkId.TestNet);

// Testnet connection endpoints
const TESTNET_CONFIG = {
  indexer: "https://indexer.testnet-02.midnight.network/api/v1/graphql",
  indexerWS: "wss://indexer.testnet-02.midnight.network/api/v1/graphql/ws",
  node: "https://rpc.testnet-02.midnight.network",
  proofServer: "http://127.0.0.1:6300",
};

const waitForFunds = (wallet: Wallet) =>
  Rx.firstValueFrom(
    wallet.state().pipe(
      Rx.tap((state) => {
        if (state.syncProgress) {
          console.log(
            `Sync progress: synced=${state.syncProgress.synced}, percentage=${state.syncProgress.percentage}`
          );
        }
      }),
      Rx.filter((state) => state.syncProgress?.synced === true),
      Rx.map((s) => s.balances[nativeToken()] ?? 0n),
      Rx.filter((balance) => balance > 0n),
      Rx.tap((balance) => console.log(`Wallet funded with balance: ${balance}`))
    )
  );


async function main() {
  console.log("🌙 Midnight Hello World Deployment\n");

  const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout,
  });

  try {
    // Ask user if they have an existing wallet seed
    const choice = await rl.question("Do you have a wallet seed? (y/n): ");

    let walletSeed: string;
    if (choice.toLowerCase() === "y" || choice.toLowerCase() === "yes") {
      // Use existing seed
      walletSeed = await rl.question("Enter your 64-character seed: ");
    } else {
      // Generate new wallet seed
      const bytes = new Uint8Array(32);
      // @ts-ignore
      crypto.getRandomValues(bytes);
      walletSeed = Array.from(bytes, (b) =>
        b.toString(16).padStart(2, "0")
      ).join("");
      console.log(`\n📝 SAVE THIS SEED: ${walletSeed}\n`);
    }

    // Build wallet from seed
    console.log("Building wallet...");
    const wallet = await WalletBuilder.buildFromSeed(
      TESTNET_CONFIG.indexer,
      TESTNET_CONFIG.indexerWS,
      TESTNET_CONFIG.proofServer,
      TESTNET_CONFIG.node,
      walletSeed,
      getZswapNetworkId(),
      "info"
    );

    wallet.start();
    const state = await Rx.firstValueFrom(wallet.state());

    console.log(`Your wallet address is: ${state.address}`);

    let balance = state.balances[nativeToken()] || 0n;

    if (balance === 0n) {
      console.log(`Your wallet balance is: 0`);
      console.log("Visit: https://midnight.network/test-faucet to get some funds.");
      console.log(`Waiting to receive tokens...`);
      balance = await waitForFunds(wallet);
    }

    console.log(`Balance: ${balance}`);

    // Load the compiled contract files
    console.log("Loading contract...");
    const contractPath = path.join(process.cwd(), "contracts");
    const contractModulePath = path.join(
      contractPath,
      "managed",
      "hello-world",
      "contract",
      "index.cjs"
    );

    if (!fs.existsSync(contractModulePath)) {
      console.error("Contract not found! Run: npm run compile");
      process.exit(1);
    }

    const HelloWorldModule = await import(contractModulePath);
    const contractInstance = new HelloWorldModule.Contract({});

    // Create wallet provider for transactions
    const walletState = await Rx.firstValueFrom(wallet.state());

    const walletProvider = {
      coinPublicKey: walletState.coinPublicKey,
      encryptionPublicKey: walletState.encryptionPublicKey,
      balanceTx(tx: any, newCoins: any) {
        return wallet
          .balanceTransaction(
            ZswapTransaction.deserialize(
              tx.serialize(getLedgerNetworkId()),
              getZswapNetworkId()
            ),
            newCoins
          )
          .then((tx) => wallet.proveTransaction(tx))
          .then((zswapTx) =>
            Transaction.deserialize(
              zswapTx.serialize(getZswapNetworkId()),
              getLedgerNetworkId()
            )
          )
          .then(createBalancedTx);
      },
      submitTx(tx: any) {
        return wallet.submitTransaction(tx);
      },
    };

    // Configure all required providers
    console.log("Setting up providers...");
    const providers = {
      privateStateProvider: levelPrivateStateProvider({
        privateStateStoreName: "hello-world-state",
      }),
      publicDataProvider: indexerPublicDataProvider(
        TESTNET_CONFIG.indexer,
        TESTNET_CONFIG.indexerWS
      ),
      zkConfigProvider: new NodeZkConfigProvider(contractPath),
      proofProvider: httpClientProofProvider(TESTNET_CONFIG.proofServer),
      walletProvider: walletProvider,
      midnightProvider: walletProvider,
    };

    // Deploy the contract to blockchain
    console.log("Deploying contract (30-60 seconds)...");

    const deployed = await deployContract(providers, {
      contract: contractInstance,
      privateStateId: "helloWorldState",
      initialPrivateState: {},
    });

    const contractAddress = deployed.deployTxData.public.contractAddress;

    // Save deployment information
    console.log("\n✅ DEPLOYED!");
    console.log(`Contract: ${contractAddress}\n`);

    const info = {
      contractAddress,
      deployedAt: new Date().toISOString(),
    };

    fs.writeFileSync("deployment.json", JSON.stringify(info, null, 2));
    console.log("Saved to deployment.json");

    // Close the wallet connection
    await wallet.close();

  } catch (error) {
    console.error("Failed:", error);
  } finally {
    rl.close();
  }
}

main().catch(console.error);
```
</details>

## Deploy Your Contract

### Start the proof server

Before deploying, you must run a local proof server. Open a **new terminal window** and run the following Docker command. Keep this terminal open throughout the deployment process.

```bash
docker run -p 6300:6300 midnightnetwork/proof-server -- 'midnight-proof-server --network testnet'
```

### Compile and deploy

In your original terminal, compile your TypeScript code and then run the deployment script.

```bash
# Compile TypeScript to JavaScript
npm run build

# Run the deployment script
npm run deploy
```

You will be prompted to enter an existing wallet seed or generate a new one. If you have no funds, the script will show your address, ask you to use the [faucet](https://midnight.network/test-faucet), and wait for the tokens to arrive before deploying.

-----

## What Gets Created

After a successful deployment, you will find these new items in your project:

  * **`deployment.json`**: A file containing your new smart contract's address and the deployment timestamp.
  * **`dist/`**: A folder containing the compiled JavaScript output from your TypeScript code.
  * **Wallet Seed**: The 64-character seed phrase is printed to your console if you generated a new wallet.

Your final project structure will look like this:

```
my-mn-app/
├── contracts/
│   ├── managed/
│   │   └── hello-world/
│   │       ├── compiler/
│   │       ├── contract/     # Contains index.cjs
│   │       ├── keys/
│   │       └── zkir/
│   └── hello-world.compact
├── src/
│   └── deploy.ts
├── dist/                     # Generated by TypeScript
├── node_modules/
├── deployment.json           # Generated after deployment
├── package-lock.json
├── package.json
└── tsconfig.json
```

:::info Important to save

  * **Wallet seed**: Your 64-character hex string. **Keep this private and secure\!** Losing it means losing access to your wallet.
  * **Contract address**: Found in `deployment.json`. You will need this to interact with your contract.
    :::

## Next Steps

Congratulations\! 🎉 Your Hello World contract is now live on the Midnight Testnet. You're ready to move on to the next guide and learn how to interact with your deployed contract.