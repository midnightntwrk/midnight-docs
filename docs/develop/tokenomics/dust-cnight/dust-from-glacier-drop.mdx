---
SPDX-License-Identifier: Apache-2.0
copyright: This file is part of midnight-docs. Copyright (C) 2025 Midnight Foundation. Licensed under the Apache License, Version 2.0 (the "License"); You may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
sidebar_label: "Begin DUST generation from Glacier Drop"
---

import { Step, StepsProvider } from '@site/src/components/Step';

# Begin DUST generation from Glacier Drop

Initialize DUST generation **during NIGHT redemption** so redeemed tokens—and any future NIGHT you receive—start generating DUST.

## Prerequisites

- Cardano wallet eligible for Glacier Drop redemption  
- Midnight DUST address that should receive DUST  
- No conflicting existing registration for this Cardano wallet  
  - *Why:* the system recognizes a **single active mapping** per wallet; duplicates are rejected to avoid ambiguity about where DUST should be directed.

## Steps

### Provide the two addresses

<StepsProvider>
  <Step>Collect your Cardano wallet address (claim recipient) and Midnight DUST address (DUST recipient).</Step>
  <Step>Provide them as part of the <em>Glacier Drop redemption</em> flow (or an equivalent CLI/SDK flow that builds the same transaction).</Step>
</StepsProvider>

### Check whether a registration already exists

<StepsProvider>
  <Step>Verify there is no valid registration UTxO already associated with this Cardano wallet. If one exists with a different DUST address, first perform an <strong>update</strong> (deregister + new register) or <strong>deregister</strong> before proceeding.</Step>
</StepsProvider>

### Submit the redemption + mapping transaction

<StepsProvider>
  <Step>Build a Cardano transaction that (i) deposits the redeemed NIGHT into the redemption contract and (ii) creates a mapping UTxO at the mapping validator with a datum <code>CardanoAddress → DUSTAddress</code> (inline datum per CIP-0032 acceptable).</Step>
  <Step>Sign and submit the transaction; keep the resulting <code>txHash</code>.</Step>
</StepsProvider>

### Allow indexing and relay to Midnight

<StepsProvider>
  <Step>The observability layer detects the mapping UTxO on Cardano and relays the mapping.</Step>
  <Step>The Midnight node updates its internal list of registered wallets and validates the mapped DUST address.</Step>
</StepsProvider>

### Confirm DUST is generating

<StepsProvider>
  <Step>After relay, DUST generation begins for the <strong>redeemed NIGHT</strong> from this transaction.</Step>
  <Step>From now on, any <strong>future NIGHT UTxOs</strong> received by the same Cardano wallet will also generate DUST to the mapped Midnight address.</Step>
</StepsProvider>
