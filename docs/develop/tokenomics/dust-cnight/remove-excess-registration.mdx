---
SPDX-License-Identifier: Apache-2.0
copyright: This file is part of midnight-docs. Copyright (C) 2025 Midnight Foundation. Licensed under the Apache License, Version 2.0 (the "License"); You may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
sidebar_label: "Remove excess registrations"
---

import { Step, StepsProvider } from '@site/src/components/Step';

# Remove excess registrations

Remove extra or invalid registration UTxOs so a single, valid mapping remains from your Cardano wallet to a Midnight DUST address.

## Prerequisites

- Cardano wallet with multiple registration UTxOs (or an invalid one) at the mapping validator  
- Access to tooling (DApp or CLI/SDK) that can:
  - list registration UTxOs (with timestamp / slot and mapped DUST address)
  - build and submit Cardano transactions that spend selected registration UTxOs

## Steps

### List existing registration UTxOs
<StepsProvider>
  <Step>Query the observability/status layer for your wallet’s <strong>registration UTxOs</strong>, including their observed <strong>timestamp/slot</strong> and the mapped <strong>DUST address</strong>.</Step>
  <Step>Identify the <strong>intended mapping</strong> you want to keep (the DUST address that should remain active).</Step>
</StepsProvider>

### Decide which registration to keep (tie-break rule)
<StepsProvider>
  <Step>If multiple registrations map to the <strong>same intended DUST address</strong>, keep the one with the <strong>latest observation</strong> (e.g., highest slot / most recent timestamp).</Step>
  <Step>If timestamps appear equal or your tooling can’t disambiguate, use your indexer’s canonical ordering (e.g., block slot → tx index → output index) and keep the one that orders last.</Step>
  <Step>If registrations map to <strong>different</strong> DUST addresses, keep the one that matches your intended address and remove the rest.</Step>
</StepsProvider>

### Select registrations to remove
<StepsProvider>
  <Step>Choose the extra or invalid registration UTxOs to remove.</Step>
  <Step><strong>Caution:</strong> Do <em>not</em> spend the registration you intend to keep; spending it will deregister the wallet unless you create a replacement in the same transaction.</Step>
</StepsProvider>

### Spend the selected registration UTxOs (one-by-one if needed)
<StepsProvider>
  <Step>Build a Cardano transaction that <strong>spends</strong> a selected registration UTxO (no replacement mapping output).</Step>
  <Step>Sign and submit; record the <code>txHash</code>.</Step>
  <Step>If multiple excess registrations remain, repeat until only the kept registration is left.</Step>
</StepsProvider>

### Allow indexing and relay to Midnight
<StepsProvider>
  <Step>The observability layer detects the spent registration UTxOs and relays changes.</Step>
  <Step>The Midnight node updates internal state so that only the kept registration is recognized as valid.</Step>
</StepsProvider>

### Confirm a single valid registration remains
<StepsProvider>
  <Step>Query status: exactly <strong>one</strong> registration UTxO should be present for this wallet, with the intended DUST address.</Step>
  <Step><strong>Effect:</strong> any <strong>future NIGHT UTxOs (on Cardano)</strong> received by this wallet will generate DUST to the <strong>kept</strong> DUST address. Previously generating UTxOs continue unchanged until spent.</Step>
</StepsProvider>
