---
SPDX-License-Identifier: Apache-2.0
copyright: This file is part of midnight-docs. Copyright (C) 2025 Midnight Foundation. Licensed under the Apache License, Version 2.0 (the "License"); You may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
sidebar_label: "Update DUST address"
---

import { Step, StepsProvider } from '@site/src/components/Step';

# Update DUST Address

Change the mapped Midnight DUST address for a registered Cardano wallet so that **future NIGHT UTxOs (on Cardano)** generate DUST to a new destination.

> **Note (atomicity & recovery):** This procedure is a *deregister + new register* in a single transaction.  
> If an update fails **after** spending the old registration but **before** creating the new one, the wallet will be *temporarily deregistered*.  
> **Recovery:** submit a new registration that recreates the mapping with the intended DUST address.

## Prerequisites

- You are already registered (Cardano wallet → DUST address mapping exists and was relayed)
- Control of the Cardano wallet that signed the original registration
- The new Midnight DUST address you want to map
- (Recommended) The current registration UTxO reference at the mapping validator

## Steps

### Prepare inputs
<StepsProvider>
  <Step>Collect your Cardano wallet address and the <strong>new</strong> Midnight DUST address.</Step>
  <Step>Locate the existing registration UTxO at the mapping validator (to be spent as part of the update).</Step>
</StepsProvider>

### Build the update transaction (deregister + new register)
<StepsProvider>
  <Step>Construct a Cardano transaction that spends the current registration UTxO (effectively a deregistration) <em>and in the same transaction</em> creates a new registration UTxO at the mapping validator.</Step>
  <Step>Attach a datum to the new registration UTxO encoding <code>CardanoAddress → NewDUSTAddress</code> (inline datum per CIP-0032 acceptable).</Step>
</StepsProvider>

### Sign and submit
<StepsProvider>
  <Step>Sign the transaction with the appropriate Cardano key(s) and submit it to the network.</Step>
  <Step>Record the resulting <code>txHash</code> for audit and troubleshooting.</Step>
</StepsProvider>

### Allow indexing and relay to Midnight
<StepsProvider>
  <Step>The observability layer detects the spent (old) and created (new) registration UTxOs on Cardano and relays the updated mapping.</Step>
  <Step>The Midnight node updates its internal state and history to reflect the new DUST address mapping.</Step>
</StepsProvider>

### Confirm the update & effects
<StepsProvider>
  <Step>Query the node’s public status to confirm the wallet is registered with the <strong>new</strong> DUST address.</Step>
  <Step><strong>Effect:</strong> NIGHT received <em>after</em> the update generates DUST to the new address. Previously producing UTxOs remain producing until they are spent.</Step>
</StepsProvider>
